<br />
<div class="container">
  <div class="row">
    <div class="col-lg-12 tocenter totop">
      <div class="card">
        <div class="card-body">
          <h3>{{ car.id ? 'Edit Car' : 'New Car' }}</h3>
          <br />

          <!-- Car Name -->
          <mdb-form-control>
            <input mdbInput type="text" id="carName" class="form-control" [(ngModel)]="car.name" />
            <label mdbLabel class="form-label" for="carName">Name</label>
          </mdb-form-control>

          <br />

          <!-- Model -->
          <mdb-form-control>
            <input
              mdbInput
              type="text"
              id="carModel"
              class="form-control"
              [(ngModel)]="car.model"
            />
            <label mdbLabel class="form-label" for="carModel">Model</label>
          </mdb-form-control>

          <br />

          <!-- Manufacture Year -->
          <mdb-form-control>
            <input
              mdbInput
              type="number"
              id="manufactureYear"
              class="form-control"
              [(ngModel)]="car.manufactureYear"
              [min]="minYear"
              [max]="currentYear"
            />
            <label mdbLabel class="form-label" for="manufactureYear"
              >Manufacture Year ({{ minYear }} - {{ currentYear }})</label
            >
          </mdb-form-control>

          <br />

          <!-- Brand -->
          <mdb-form-control>
            <select
              mdbInput
              id="brand"
              class="form-control"
              [(ngModel)]="car.brand"
              [compareWith]="compareBrand"
            >
              <option [ngValue]="null">Select a Brand</option>
              <option *ngFor="let b of brands" [ngValue]="b">{{ b.name }}</option>
            </select>
            <label mdbLabel class="form-label" for="brand">Brand</label>
          </mdb-form-control>

          <br />

          <!-- Accessories with Checkboxes -->
          <div class="accessories-section">
            <p class="form-label active">Accessories</p>
            <div class="d-flex flex-wrap">
              <div *ngFor="let a of accessories" class="form-check form-check-inline me-3 mb-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  [id]="'accessory-' + a.id"
                  [checked]="isSelected(a)"
                  (change)="onAccessoryChange(a, $event)"
                />
                <label class="form-check-label" [for]="'accessory-' + a.id">
                  {{ a.name }}
                </label>
              </div>
            </div>
          </div>

          <br />

          <!-- Owner -->
          <mdb-form-control>
            <select
              mdbInput
              class="form-control"
              [(ngModel)]="car.owner"
              [compareWith]="compareOwner"
            >
              <option [ngValue]="null">Unassigned</option>

              @for (owner of owners; track owner.id) {
              <option [ngValue]="owner">
                {{ owner.fullName }} â€” DL: {{ owner.driversLicense }}
              </option>
              }
            </select>
            <label mdbLabel class="form-label">Owner</label>
          </mdb-form-control>

          <br />

          <button type="button" class="btn btn-primary btn-rounded" mdRipple (click)="saveCar()">
            Save
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
